# BizBox Multi-Tenant SaaS Platform
# Production Environment Configuration for Coolify Deployment
# Target: http://194.164.89.92/

# ==============================================
# DEPLOYMENT CONFIGURATION
# ==============================================
NODE_ENV=production
DEBUG=false
MAINTENANCE_MODE=false

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
DATABASE_URL=postgresql://bizbox_user:${DB_PASSWORD}@postgres:5432/bizbox
DB_HOST=postgres
DB_PORT=5432
DB_NAME=bizbox
DB_USER=bizbox_user
# DB_PASSWORD - Set as environment variable in Coolify

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_URL=redis://default:${REDIS_PASSWORD}@redis:6379
# REDIS_PASSWORD - Set as environment variable in Coolify

# ==============================================
# NEXT.JS AUTHENTICATION
# ==============================================
# NEXTAUTH_SECRET - Set as environment variable in Coolify (minimum 32 characters)
NEXTAUTH_URL=http://194.164.89.92:3001
ADMIN_NEXTAUTH_URL=http://194.164.89.92:3002
BUILDER_NEXTAUTH_URL=http://194.164.89.92:3003
CUSTOMER_NEXTAUTH_URL=http://194.164.89.92:3004
SUPER_ADMIN_NEXTAUTH_URL=http://194.164.89.92:3006

# ==============================================
# DOMAIN CONFIGURATION (Direct IP and Port Access)
# ==============================================
SERVER_IP=194.164.89.92
PRIMARY_DOMAIN=194.164.89.92:3001
ADMIN_DOMAIN=194.164.89.92:3002
BUILDER_DOMAIN=194.164.89.92:3003
CUSTOMER_DOMAIN=194.164.89.92:3004
TENANT_DOMAIN=194.164.89.92:3005
SUPER_ADMIN_DOMAIN=194.164.89.92:3006

# ==============================================
# STRIPE PAYMENT PROCESSING
# ==============================================
# Use test keys for initial deployment
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# ==============================================
# EMAIL CONFIGURATION
# ==============================================
SMTP_HOST=smtp.resend.com
SMTP_PORT=587
SMTP_USER=resend
# SMTP_PASSWORD - Set as environment variable in Coolify
FROM_EMAIL=noreply@bizbox.194-164-89-92.nip.io

# ==============================================
# FILE STORAGE (Minio/S3 Compatible)
# ==============================================
AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID - Set as environment variable in Coolify
# AWS_SECRET_ACCESS_KEY - Set as environment variable in Coolify
S3_BUCKET=bizbox-assets
S3_ENDPOINT=http://194.164.89.92:9000

# ==============================================
# CDN CONFIGURATION
# ==============================================
CDN_URL=https://cdn.bizbox.194-164-89-92.nip.io
CDN_DOMAIN=cdn.bizbox.194-164-89-92.nip.io

# ==============================================
# SECURITY CONFIGURATION
# ==============================================
CORS_ORIGIN=http://194.164.89.92:3001,http://194.164.89.92:3002,http://194.164.89.92:3003,http://194.164.89.92:3004,http://194.164.89.92:3005,http://194.164.89.92:3006
RATE_LIMIT_MAX=1000
RATE_LIMIT_WINDOW=900000

# Security headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
HSTS_ENABLED=true

# ==============================================
# SSL/TLS CONFIGURATION
# ==============================================
SSL_EMAIL=admin@bizbox.194-164-89-92.nip.io
FORCE_HTTPS=false

# ==============================================
# ADMIN CONFIGURATION
# ==============================================
ADMIN_EMAIL=admin@bizbox.194-164-89-92.nip.io
# SUPER_ADMIN_PASSWORD - Set as environment variable in Coolify

# ==============================================
# MONITORING & LOGGING
# ==============================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_METRICS=true
METRICS_PORT=9090

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health

# ==============================================
# MULTI-TENANT CONFIGURATION
# ==============================================
TENANT_MODE=multi
DEFAULT_THEME=default
ENABLE_CUSTOM_DOMAINS=true
MAX_TENANTS_PER_USER=5

# ==============================================
# FEATURE FLAGS
# ==============================================
ENABLE_REGISTRATION=true
ENABLE_TRIAL=true
TRIAL_DAYS=14
ENABLE_BILLING=true
ENABLE_ANALYTICS=true
ENABLE_CHAT_SUPPORT=false

# ==============================================
# PERFORMANCE & OPTIMIZATION
# ==============================================
ENABLE_CACHING=true
CACHE_TTL=3600
MAX_UPLOAD_SIZE=52428800
REDIS_CACHE_PREFIX=bizbox:cache:
SESSION_TIMEOUT=86400

# Database connection pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=10000

# ==============================================
# BACKUP CONFIGURATION
# ==============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
# BACKUP_ENCRYPTION_KEY - Set as environment variable in Coolify

# ==============================================
# WEBHOOK CONFIGURATION
# ==============================================
# WEBHOOK_SECRET - Set as environment variable in Coolify
WEBHOOK_TIMEOUT=30000

# ==============================================
# COOLIFY SPECIFIC CONFIGURATION
# ==============================================
COOLIFY_DEPLOYMENT=true
COOLIFY_SERVER=http://194.164.89.92
COOLIFY_PROJECT=bizbox-saas
COOLIFY_ENVIRONMENT=production

# Application ports
PORT=3000
METRICS_PORT=9090

# Application URLs for internal communication
LANDING_URL=http://landing:3000
ADMIN_URL=http://admin:3000
BUILDER_URL=http://builder:3000
CUSTOMER_URL=http://customer:3000
TENANT_URL=http://tenant:3000

# ==============================================
# BUILD CONFIGURATION
# ==============================================
SKIP_ENV_VALIDATION=false
ANALYZE_BUNDLE=false
TELEMETRY_DISABLED=true

# ==============================================
# ERROR TRACKING
# ==============================================
# SENTRY_DSN - Set as environment variable in Coolify (optional)
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${COMMIT_SHA}

# ==============================================
# THIRD-PARTY INTEGRATIONS (Optional)
# ==============================================
# OPENAI_API_KEY - Set as environment variable in Coolify (optional)
# GOOGLE_CLIENT_ID - Set as environment variable in Coolify (optional)  
# GOOGLE_CLIENT_SECRET - Set as environment variable in Coolify (optional)

# ==============================================
# TIMEZONE CONFIGURATION
# ==============================================
TZ=UTC
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-ES,fr-FR,de-DE

# ==============================================
# SESSION CONFIGURATION
# ==============================================
SESSION_SECRET=${NEXTAUTH_SECRET}
SESSION_MAX_AGE=86400
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=lax